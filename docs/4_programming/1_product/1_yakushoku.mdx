---
title: 役職決め
---

:::tip[リンク]
https://furuschool.github.io/yakushoku-sort/
:::

## 概要
係や役職など人数制限があるものに、希望によって最適に割り振りを決めることができるアプリケーションです。

具体的には、以下のような場合に利用できます。
- クラブ活動やイベントで役割分担を決める際、メンバーの希望を考慮しながら公平に割り振りを行いたい時
- ボランティア活動や地域イベントで、特定のタスクに必要な人数を考慮して、参加者を割り振りたい時
- 運動会で、どの競技に出場するかを希望を取って割り振りたい時
- 各学生が進路希望を提出して、進路先の割り振りをしたい時

## 利用方法
以下のことを行うことで簡単に利用可能です。
1. 役職/係とその人数（最小人数、最大人数）を設定する
2. 各人ごとの役職/係の希望を入力する
3. 計算方法を選んで計算する

結果として、各人がどの役職/係に割り振られるかが表示されます。

:::warning[注意]
以下の条件を前提としています
- 全員に必ず1つの役職/係を割り振る
- 最小人数の合計 $\le$ 実際の人数 $\le$ 最大人数の合計
:::

また、計算方法は以下の3つから選ぶことができます。
1. 標準：標準的な計算方法
2. 第一希望を優先する：「標準」よりも第一希望をより割り振りやすくする計算方法
3. 希望していない役職を割り振らない：希望していない役職には割り振らない計算方法

### CSV のアップロード

役職と名前を 1 つずつ入力するのが面倒な場合は、CSVファイルをアップロードすることで一括で入力することも可能です。
その際、以下の形式で入力してください。

- 役職用のCSVファイルは、"役職名, 最小人数, 最大人数" の形式
- 名前用のCSVファイルは、"名前, 第1希望の役職名, 第2希望の役職名, 第3希望の役職名, ..." の形式

:::warning[注意]
役職名は、名前のCSVファイルに記載されているものと一致している必要があります
:::
入力例
```
// 役職用のCSVファイル
役職1, 1, 3
役職2, 2, 4
役職3, 1, 2
...

// 名前用のCSVファイル
名前1, 役職4, 役職1, 役職3, ...
名前2, 役職2, 役職1, 役職3
名前3, 役職1, 役職2
...
```

## 実装方法
- vite + React + TypeScript で実装しています
- 計算もフロントエンドで行っているため、重い計算を行おうとすると処理が止まることがあります

### 計算方法
係や役職を振り分ける場面では、各人の希望に重みづけをした上で、最も点数が高くなるような振り分けるアルゴリズムを実装しています
- 初期値をランダムに取ってそこから局所最適解を探索することを複数回行い、最も点数が高くなるような最適解を表示しています
- 同じ点数が複数ある場合は、3つ以内の解を表示しています
- 「第一希望を優先する」では、第一希望の重みを高くしています
- 「希望していない役職を割り振らない」では、希望していない役職には点数を与えず、希望している役職にのみ点数を与えるようにしています

## 今後の展望
今後実装したい機能などをまとめています。
- 一部の人のみに役職を割り振る機能の追加
- 複数の役職を割り振る機能の追加
- 他の要素の追加：例えば、点数や向き/不向きなどに応じた点数の重みづけの変更