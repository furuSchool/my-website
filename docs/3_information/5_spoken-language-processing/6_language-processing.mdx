---
title: 6. 言語処理
---
:::warning[目標]
文章（ = 文字列）から何らかの意味表現を取り出す処理。ここでは，ニューラルネットワークを用いた処理には触れない。
:::
1. 形態素解析：文字列を単語や形態素などの構成要素に分割，品詞の同定
2. 構造解析：修飾関係同定
3. 意味処理：文中の動詞を中心として文の意味的解釈を行う
4. 文脈解析：代名詞の指示先同定，文同士の論理関係同定
---
## 形態素解析
:::warning[目標]
文字列を単語や形態素などの構成要素に分割し，品詞の同定を行う。
:::
- 音声認識の最初の段階などに使われる
:::tip[形態素]
形態素：自然言語の分において意味を担う最小の言語単位。日本語なら基本的に単語に相当する。
:::
- IPA が品詞体系を定めている

### 解析アルゴリズム
1. 初期化：ポインタを文頭に置く
2. 辞書検索：ポインタ一位置から辞書検索
3. 連接チェック：連接可能なもの全てにエッジをはる = 辞書検索であった文字に木を作るイメージ
4. ポインターを移動する：ポインターは最も短い文字の次の位置に移動
5. ポインタが文末に到達するまで繰り返す = 左から右へ進むネットワーク的なものができる

実際にはさまざまなヒューリスティクス（経験的優先規則）が用いられている
- **最小コスト法** （最長一致法（深さ優先），文節数最小法，形態素数最小法など）を用いて素早く解析する
    - アルゴリズムとしてはビタビアルゴリズムが用いられる

#### トライ：形態素辞書を木構造として，うまく検索しやすいようにしたもの
- ありえる形態素全て（動詞の未然形とかまで）を 1 文字目から順に木構造としている

### 統計モデルによる形態素解析
：自動的にコスト（パラメータ）を学習することによって，最小コスト法を実現する

#### 例：品詞 2 つ組モデル
- 目標：入力の文字列： $S = c_1,…,c_m$ $\rightarrow$ 形態素解析により，形態素列 $W_S=w_1,…,w_n$ と品詞列 $T_S = t_1,…,t_n$ を求める
    - この時， $P(W_S,T_S | S) \approx \Pi_{i=1}^{n+1}P(t_i|t_{i-1})P(w_i|t_i)$ を最大化する組 $\hat{W_S},\hat{T_S}$ を求めれば良い
    - 近似として，$P(t_i|t_{i-1}) = \frac{count(t_{i-1},t_i)}{count(t_{i-1})}$：品詞の遷移確率と，
    $P(w_i|t_i) =\frac{count(w_i,t_i)}{count(t_i)}$：単語の出現確率を用いる

### 仮名漢字変換
：日本語特有で，入力のひらがな列中の任意の部分ひらがな列を，最小コスト法により一意の仮名漢字列に変換する
- ひらがな列： $K = k_1,…,k_m$
- 仮名漢字列： $W_K = w_1,…,w_m$
- $P(W_K | K) = P(W_K)P(K|W_K)$ を最大化する
    - 言語モデル $P(W_K)=\Pi_{i=1}^{n+1} P(t_i|t_{i-1})P(w_i|t_i)$：$P(W_K)$ は単語列自体の確率分布
    - 仮名漢字モデル $P(K|W_K) = \Pi_{i=1}^{n+1} P(r_i|w_i)$：単語列 $W_K$ が与えられた時の $K$ の条件付き確率分布
        - 仮名漢字 $w_i$ に対してふりがな $r_i$ が付与される確率の積

---
## 構文解析
:::warning[目標]
文の構文構造に関する文法知識を用いて，品詞が同定された文の構文構造を同定する。
:::

### 句構造解析
：主に英文などで用いられる。文脈自由文法（CFG）を用いて，文を句構造の形式に変換する。

:::tip[文脈自由文法(CFG)]
形式文法 $G = (V_N,V_T,P,S)$ の4組で表される
- $V_T$：終端記号（文の最後）の集合：**単語**
- $V_N$：非終端記号の集合：**品詞**
- $P$：文を生成する規則の集合（例： $S\rightarrow NP~VP,N\rightarrow girl$ など）：**文法**
    - 正確には，$ A \rightarrow \alpha~(A \in V_N, \alpha \in (V_N \cup V_T)^*)$
- $S$：開始記号
:::
- 句構造文法 > 文脈依存文法（CDG） > 文脈自由文法（CFG） > 正規文法（RG）
- 自然言語の多くは文脈自由文法で表現できる
- 同じ文字列でも異なる構文構造を持つことがある

#### 縦型句構造解析アルゴリズム：最もナイーブなアルゴリズム。2 通りの方法がある。
1. 葉（各単語 = 終端記号列）から組み上げる上昇型。すなわち，生成規則を逆にたどる形で，終端記号から非終端記号を生成し，開始記号に到達できれば成功

2. 開始記号 $S$ が与えられ，生成規則に従って句構造を成長させて，文章を構成できるまで頑張る下降型

#### CYK 法：文脈自由文法を用いた解析の代表的アルゴリズム。上昇型。$O(n^3)$。
生成規則をチョムスキー標準形 $A \rightarrow BC~\text{or}~A \rightarrow a~(A,B,C\in V_N,a\in V_T)$ に限定することで実現している。  
なお，任意の文脈自由文法は等価なチョムスキー標準形の文脈自由文法に変形できる。

1. 単語数 $n$ として，$n \times n$ の行列を用意し，対角成分を文章の終端記号( = 単語)と非終端記号( = 品詞)を埋める
2. $A \rightarrow BC$ を用いて，次々に非終端記号を埋めていく。非終端記号が 1 つの要素に複数入る場合もある
3. 1 行 n 列目に開始記号があれば成功。なければ失敗

#### 統計的手法：確率文脈自由文法に基づくモデルなど
- コーパスによって各生成規則に対してその確率値（= 頻度）が与えられており，コスト的なものも計算できる

### 係り受け解析
：日本語などで用いられる。比較的語順の制約が緩い，格要素が省略されやすい文の解析に使う
- 句構造解析では，全く同じ意味で異なる語順の文を同じ文として扱うことが難しい

**文節まとめ上げ規則** と **文節係り受け規則** からなる。二つの規則を区別することで語順の違いを考慮できる。
- 文節まとめ上げ規則：句構造で用いる文脈自由文法のように木構造を作るイメージ
- 文節係り受け規則：いわゆる修飾関係。単語の下に一つの単語がぶら下がっているイメージ。
    - 統計的手法により，文節 $b_i$ が文節 $b_j$ にかかる確率 $P(D) = \Pi P(b_i \rightarrow b_j)$ によって係り受け構造 $D$ を定義することもできる