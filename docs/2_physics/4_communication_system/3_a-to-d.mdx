---
title: A/D 変換
---

:::warning[目標]
アナログ信号をデジタル信号に変換する方法を理解する！
:::

基本は信号処理を参照。大事なところだけ抜き出し

## アナログ → デジタル の流れ
:::tip[アナログ → デジタル]
例えば，PCM（パルス符号変調）はアナログ信号をデジタル信号に変換する方法であり，以下の流れになる
1. サンプリング（標本化）
2. 量子化
3. 符号化（Encoding）
:::
まずは，PCM について詳しく見ていく

## サンプリング
情報信号 $m(t)$ を一定時間間隔 $T_s$ で取り出して離散信号に変換すること
- サンプリング後：$m_{\delta}(t) = \sum_{n=-\infty}^{\infty} m(nT_s) \delta(t-nT_s) = m(t) \otimes \delta^*(t)$
- $M_{\delta}(f) = \frac{1}{T_s}\sum_{n=-\infty}^{\infty} M(f-nf_s)$：周期連続スペクトル
- サンプリング周波数 $f_s = \frac{1}{T_s}$

サンプリング定理： $f_s = \frac{1}{T_s} < 2B$ （送信信号のバンド幅 $B$ ）だと、エイリアシングが起こる
- 逆に，$f_s > 2B$ なら，元の信号を復元できる
- $f_s = 2B$ をナイキスト周波数とよぶ

## 量子化
サンプリングにより得られた振幅の大きさを離散値に変換すること
- 量子化幅：$\Delta = \frac{2m_p}{2^N}$（$N$ ビット量子化，$m_p$：最大振幅）
- 量子化誤差：最大 $\frac{m_p}{2^{N}}$，平均 2 乗誤差 $\frac{m_p^2}{3 \cdot 2^{2N}}$
    - 量子化ビット数を 1 ビット増やすと、SQNR (signal-to-quantization noise ratio) は 6 dB 向上する
- また，音声などでは，低周波数ほど細かく量子化するような非一様量子化が使われることもある    
    - コンパンディング（companding, [wiki](https://ja.wikipedia.org/wiki/%E3%82%B3%E3%83%B3%E3%83%91%E3%83%B3%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0)）
    ：ダイナミックレンジを狭くする
    - コンパンディング技術として，A-law（欧州）, μ-law（米国、日本）などがある

## 符号化
：量子化された信号を N ビットのデジタル信号に変換すること。単純に数字を二進数にする他にもいろんな方法がある
- Natural binary code(NBC), folded binary code(FBC), 2-complement code (2-C), Gray code など…

## PCM の性質
### 帯域幅
- 例えば，エラー率 0.5%，$m_p = 3000~Hz$ の場合，$\frac{\Delta}{2} = \frac{m_p}{2^{N}} < \frac{0.5}{100} m_p$ なので，$N = 8$ で十分
- また，ナイキスト周波数 $f_s = 6000~Hz$
- そのため，$48,000 bps$ で送信する必要がある
- 例えば，binary PCM なら $1~Hz$ で $2~bit$ 送信できるので，帯域幅は $24,000~Hz$

### SNR
- 平均送信電力 $a m_p^2$（だいたい， $a = \frac{1}{2}$ ほど）
- 量子化誤差：$\frac{m_p^2}{3 \cdot 2^{2N}}$
- この結果，SNR は 量子化ビット数が 1 増えるごとに 6 dB 向上する

## その他
- DPCM：PCM の一種で，前の信号から予測した信号との差分を符号化して送信することで，データ量を減らす。音声などで用いられる
    - FIR フィルタを使って予測することが多い
- DM（Delta Modulation）：DPCM の一種で，予測誤差を 1 ビットで表現し，$\Delta$ 分だけ前のデータから変化させる（等幅の階段みたいになる）